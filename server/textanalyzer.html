<!DOCTYPE html> 
<html lang="sv"> 
<head>
    <link rel="stylesheet" type="text/css" href="styletextanalyzer.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Textanalyzer</title>
</head>
<body>
    <form action ="/useraction" id ="action" method="post">
        <div id="username" name="username" ></div>
        <h1>Carpe Competence</h1>   
        <b> 
            Choose which gender you would like to target: 
            <input type="submit" name="target" id="t1" value="male"> 
            <input type = "submit" name="target" id="t2" value="female">
            <div id="t-status">t-status here: </div>
        </b>
        <h3>Write or paste your description here:</h3>
        <textarea cols="70" rows="15" name="description"></textarea>
        <input type="submit"  cols="35" name = "analyze" value="analyze">
        <div id="a-status">a-status here:</div>
    </form>
  

    <script>
        class LoggedInUser {
            constructor() {
                this.name = null;
            }
        }
        const currentuser = new LoggedInUser();
        const params = new URLSearchParams(location.search);
        const $userDiv = document.querySelector('#username');
        //document.getElementById("action").action = "/useraction:" + currentuser;
        if (params.has('user')) {
            console.log("param has user");
            currentuser.name = params.get('user');
            $userDiv.innerText = `User: ${currentuser.name}`;
            document.getElementById("action").action = "/useraction:" + currentuser.name;
            //document.getElementById("a-t").action = "/analyzetext:" + username
        }
        if (params.has('target')) {
            console.log("param has target");
            const currentuser = params.get("user");
            console.log(currentuser)
            const targetstatus = params.get('target');
            console.log(targetstatus);
            //const newDiv = document.createElement("div");
            const currentDiv = document.getElementById("t-status");
            const newNode = document.createTextNode(targetstatus);
            currentDiv.appendChild(newNode);
            document.getElementById("action").action = "/useraction:" + currentuser;
            //document.getElementById("userurl").action = "/targetaction:" + username;
            //document.getElementById("analyze").action = "/analyzetext:" + username
        }
        if (params.has('analyze')) {
            console.log("param has analyze")
            const analyzestatus = params.get('analyze');
            console.log(analyzestatus);
            //const newDiv = document.createElement("div");
            const currentDiv = document.getElementById("a-status");
            const newNode = document.createTextNode(analyzestatus);
            currentDiv.appendChild(newNode);
            document.getElementById("action").action = "/useraction:" + currentuser.name;
        }
       
      </script>

</body>
</html>
  


